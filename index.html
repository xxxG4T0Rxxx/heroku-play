<!DOCTYPE html>
<html>
  <head>
    <!-- <style>
      .hidden {
        display: none;
      }
    </style> -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
  </head>

  <body>
    <h1>Gator's Text Game</h1>
    <h2 id = "word"> WORD HERE </h2>
    <h3 id = "grams"> GRAMS HERE </h3>
    <button id="gamepageNav"> START GAME </button>
    <button id="getGrams"> GET GRAMS </button>
    <button id="grabmore">Fetch 10 Bingos</button>
    <ul id="bingos">
    </ul>
  </body>

  <script>

    var rackwords;
    document.getElementById("gamepageNav").addEventListener('click', function(){
      window.location.href = "gamepage.html";
    });

    document.getElementById("getGrams").addEventListener('click', function(){
      $.ajax({
          method: "GET",
          url: "api.php",
          success: data =>{ rackwords = data}
      });

      word.innerText = rackwords.toString();
    });


    $(document).ready(function(){

      let showRacks = function(racks){
        $("#bingos").html('');
        racks.map(rack=>{
          $("#bingos").append(`<li>${rack.rack}: <span class="answer hidden">${rack.words}</span></li>`);
        });

        $("#bingos li").on("click", function(evt){
          $(evt.currentTarget).find(".answer").toggleClass("hidden");
        });
      }

      $("#grabmore").on("click", function(){
        $.ajax({
            method: "GET",
            url: "api.php",
            success: data=>{ showRacks(data)}
        });
      });
    });


  </script>

</html>
